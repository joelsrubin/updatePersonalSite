<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <meta name="theme-color" content="#967bb6" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <title>Joel Rubin</title>
    <link rel="apple-touch-icon" href="./assets/baseball.png" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header>
      <div class="header_container">
        <h2 class="name">
          <span class="letter">J</span><span class="letter">o</span
          ><span class="letter">e</span><span class="letter">l</span>
          <span class="letter">R</span><span class="letter">u</span
          ><span class="letter">b</span><span class="letter">i</span
          ><span class="letter">n</span>
        </h2>

        <p>
          I am a Software Engineer at
          <a class="job" href="https://www.sureapp.com" target="_blank">
            SureApp</a
          >
          <br /><br />
          <span>üìß </span
          ><a
            href="mailto:joelsrubin@gmail.com?subject=Hey%20Joel!"
            target="_blank"
            >joelsrubin@gmail.com</a
          >! <br /><br />
          <span>‚úèÔ∏è </span><a href="guestbook.html">Sign my guestbook!</a>
          <br /><br />

          <span>üëì views:</span>
          <span id="views">0</span>
        </p>
      </div>
    </header>
    <main>
      <section>
        <h2>Work</h2>
        <div class="img_container">
          <div class="img_wrapper">
            <a
              href="https://www.smartmatic.com/us/"
              target="_blank"
              class="icon"
            >
              <img
                src="./assets/smartmatic.png"
                alt="Smartmatic"
                height="60px"
                width="60px"
              />
            </a>
          </div>
          <a href="https://www.sureapp.com" target="_blank" class="icon">
            <img
              src="./assets/sureapp.jpeg"
              alt="SureApp"
              height="60px"
              width="60px"
            />
          </a>
        </div>
      </section>

      <section>
        <h2>Personal</h2>
        <div class="img_container">
          <a
            href="https://my-wordle-experience.netlify.app/"
            target="_blank"
            class="icon"
          >
            <img
              src="./assets/2051647.855dd88a copy.svg"
              alt="Wordle"
              height="60px"
              width="60px"
            />
          </a>

          <a
            href="https://vite-vinyl.netlify.com/"
            target="_blank"
            class="icon"
          >
            <img
              src="/assets/vinyl.svg"
              alt="Vinyl"
              height="60px"
              width="60px"
            />
          </a>
          <a
            href="https://www.linkedin.com/in/joel-rubin-0529/"
            target="_blank"
            class="icon"
          >
            <img
              src="./assets/linkedin.png"
              alt="LinkedIn"
              height="60px"
              width="60px"
            />
          </a>
          <a href="https://github.com/joelsrubin?" target="_blank" class="icon">
            <img
              src="./assets/github.jpeg"
              alt="Github"
              height="60px"
              width="60px"
            />
          </a>
        </div>
      </section>
      <section>
        <h2>Study</h2>
        <div class="img_container">
          <a href="https://www.nyu.edu/" target="_blank" class="icon">
            <img src="./assets/nyu.png" alt="NYU" height="60px" width="60px" />
          </a>
          <a href="https://www.soas.ac.uk/" target="_blank" class="icon">
            <img
              src="./assets/soas.jpeg"
              alt="SOAS"
              height="60px"
              width="60px"
            />
          </a>
          <a
            href="https://www.hackreactor.com/coding-bootcamp?utm_source=Google&utm_medium=cpc&utm_term=hack%20reactor&utm_campaign=HR_Brand_Keywords_NAT&gclid=CjwKCAiAl-6PBhBCEiwAc2GOVMHTWjknB03yuFa4tHDqg1pclWIeFEwlJO-SczZxawNHXRg-KFajWBoCUrUQAvD_BwE"
            target="_blank"
            class="icon"
          >
            <img
              src="./assets/hackreactor.jpeg"
              alt="HackReactor"
              height="60px"
              width="60px"
            />
          </a>
        </div>
      </section>
    </main>
    <footer>
      <p>&copy; Joel Rubin <span id="year">2023</span></p>
    </footer>
  </body>
  <script>
    const yearSpan = document.getElementById('year');
    const viewsDiv = document.getElementById('views');

    async function updateViewCount() {
      await fetch('https://api.val.town/v1/run/Joelsrubin.updateViewCount');
    }

    /** @returns {number} */
    async function getViewCount() {
      const data = await fetch(
        'https://api.val.town/v1/run/Joelsrubin.pageViews'
      );
      const result = await data.json();
      return result;
    }

    function animateValue(obj, start, end, duration, easingFunction) {
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const timeElapsed = timestamp - startTimestamp;
        const progress = Math.min(timeElapsed / duration, 1);
        const easedProgress = easingFunction(progress);
        obj.innerHTML = Math.floor(easedProgress * (end - start) + start);
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    // Easing function: easeInOutQuad
    function easeInOutQuad(t) {
      return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
    }

    function setYear() {
      const currentYear = new Date().getFullYear();
      yearSpan.innerHTML = currentYear;
    }

    (async () => {
      setYear();
      await updateViewCount();
      const updated = await getViewCount();
      animateValue(viewsDiv, 0, updated, 4000, easeInOutQuad);
    })();
  </script>
</html>
